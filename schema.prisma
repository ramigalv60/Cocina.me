generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL") // Cambia esto por la URL de tu base de datos MySQL
}

model Usuario {
  UsuarioID     Int       @id @default(autoincrement())
  NombreUsuario String
  Contraseña    String
  videos       Video[]
  favoritos    Receta[]  @relation("UsuarioFavoritos")
}

model Video {
  VideoID      Int      @id @default(autoincrement())
  UsuarioID    Int
  Título       String
  Descripción  String?
  URLVideo     String?
  FechaSubida  DateTime?
  usuario      Usuario  @relation(fields: [UsuarioID], references: [UsuarioID])
  receta       Receta?
}

model Receta {
  RecetaID         Int               @id @default(autoincrement())
  VideoID          Int?
  NombreReceta     String
  Descripción      String?
  NivelDificultad  String?
  TiempoPreparación Int?
  video            Video?            @relation(fields: [VideoID], references: [VideoID])
  ingredientes     IngredienteReceta[]
  categorías       RecetaCategoría[]
  usuariosFavoritos Usuario[]         @relation("UsuarioFavoritos")
}

model Ingrediente {
  IngredienteID  Int               @id @default(autoincrement())
  NombreIngrediente String
  Cantidad       Float?
  UnidadMedida   String?
  recetas        IngredienteReceta[]
}

model IngredienteReceta {
  RecetaID       Int
  IngredienteID  Int
  Cantidad       Float?
  receta         Receta  @relation(fields: [RecetaID], references: [RecetaID])
  ingrediente    Ingrediente @relation(fields: [IngredienteID], references: [IngredienteID])
  @@id([RecetaID, IngredienteID])
}

model Categoría {
  CategoríaID Int      @id @default(autoincrement())
  NombreCategoría String
  recetas     RecetaCategoría[]
}

model RecetaCategoría {
  RecetaID    Int
  CategoríaID Int
  receta      Receta   @relation(fields: [RecetaID], references: [RecetaID])
  categoría   Categoría @relation(fields: [CategoríaID], references: [CategoríaID])
  @@id([RecetaID, CategoríaID])
}